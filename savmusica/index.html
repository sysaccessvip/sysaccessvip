<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Music Player ‚Äî SYSACCESSVIP</title>

  <style>
    /* ------------------ STYLES (conservados y organizados) ------------------ */
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
    :root { --bg: #0f1724; --panel: rgba(17,24,39,0.85); --glass: rgba(42,53,78,0.6); }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:'Inter',sans-serif;background:var(--bg);color:#fff}
    ::-webkit-scrollbar{display:none}
    .loader{border:4px solid #f3f3f3;border-top:4px solid #3498db;border-radius:50%;width:40px;height:40px;animation:spin 1s linear infinite}
    @keyframes spin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}

    /* Layout */
    body{display:flex;flex-direction:column;overflow:hidden}
    #sidebar{transition:transform .3s ease-in-out}
    .page{display:none}
    .page.active{display:block}
    header{display:flex;align-items:center;gap:12px;padding:12px;background:rgba(2,6,23,0.6);backdrop-filter:blur(6px);position:sticky;top:0;z-index:40}
    input[type="search"]{width:100%;padding:10px 14px;border-radius:999px;background:#142032;border:1px solid rgba(255,255,255,0.04);color:#fff}

    /* Player containers */
    #player-video-container{width:100%;max-width:640px;margin:0 auto;position:relative;background:#000;border-radius:.5rem;overflow:hidden;height:0;padding-top:56.25%}
    #player-video-container iframe,#player-video-container > div{position:absolute!important;top:0;left:0;width:100%!important;height:100%!important;border:0;display:block}
    #player-video-container:fullscreen{padding-top:0;height:100%;width:100%;max-width:100%;border-radius:0}

    .modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.6);display:flex;align-items:center;justify-content:center;z-index:60}
    .modal{background:#0f1724;color:#fff;padding:1rem;border-radius:.5rem;width:360px;max-width:calc(100% - 32px)}

    .toast{position:fixed;right:16px;bottom:16px;background:rgba(17,24,39,.95);color:white;padding:10px 14px;border-radius:8px;z-index:70;box-shadow:0 6px 18px rgba(2,6,23,.6)}

    /* Playlist header */
    #playlist-header{height:300px;position:relative;background-size:cover;background-position:center;transition:height .3s ease-out}
    #playlist-header::after{content:'';position:absolute;inset:0;background:linear-gradient(to top, rgba(15,23,36,1) 5%, rgba(15,23,36,0.4) 50%, rgba(15,23,36,0) 100%)}
    #playlist-info{position:absolute;bottom:0;left:0;right:0;padding:1rem;z-index:10}

    /* Sticky header */
    #playlist-sticky-header{position:sticky;top:0;z-index:20;background-color:rgba(15,23,36,.8);backdrop-filter:blur(10px);padding:1rem;display:flex;align-items:center;opacity:0;transform:translateY(-100%);transition:opacity .3s,transform .3s}
    #page-playlist-details.scrolled #playlist-sticky-header{opacity:1;transform:translateY(0)}
    #page-playlist-details.scrolled #playlist-header{height:100px}

    /* Progress bar */
    #player-progress-bar{--progress-percent:0%;-webkit-appearance:none;width:100%;background:transparent;cursor:pointer;height:16px}
    #player-progress-bar::-webkit-slider-runnable-track{height:4px;border-radius:2px;background:linear-gradient(to right,#fff var(--progress-percent),rgba(255,255,255,.3) var(--progress-percent));transition:background .2s linear}
    #player-progress-bar::-webkit-slider-thumb{-webkit-appearance:none;margin-top:-6px;width:16px;height:16px;background:#fff;border-radius:50%;box-shadow:0 0 4px rgba(0,0,0,.5)}
    #player-progress-bar:focus{outline:none}

    /* Queue panel */
    #player-queue-panel{position:absolute;bottom:0;left:0;right:0;height:65%;background:rgba(17,24,39,.9);backdrop-filter:blur(10px);border-top-left-radius:1.5rem;border-top-right-radius:1.5rem;transform:translateY(100%);transition:transform .4s cubic-bezier(.4,0,.2,1);z-index:20;display:flex;flex-direction:column}
    #player-queue-panel.visible{transform:translateY(0)}
    #player-queue-handle{padding:.5rem;text-align:center;cursor:s-resize;flex-shrink:0;touch-action:none}

    /* Mini player */
    #mini-player{position:fixed;bottom:0;left:0;right:0;background:rgba(42,53,78,.8);height:64px;display:flex;align-items:center;padding:8px;gap:12px;box-shadow:0 -6px 24px rgba(0,0,0,.6);transform:translateY(0);z-index:40}
    #mini-player .marquee-container{overflow:hidden;white-space:nowrap}
    .marquee-text{display:inline-block;padding-left:100%;animation:marquee 10s linear infinite}
    .marquee-text-mini{display:inline-block;padding-left:100%;animation:marquee 8s linear infinite}
    @keyframes marquee{0%{transform:translateX(0)}100%{transform:translateX(-100%)}}

    /* mini-play/pause button and visualizer */
    #mini-play-pause-btn{position:relative;display:inline-flex;align-items:center;justify-content:center;width:44px;height:44px;border-radius:999px;cursor:pointer}
    .mini-eq{display:flex;align-items:flex-end;gap:4px;width:24px;height:18px;pointer-events:none}
    .mini-eq .bar{width:4px;background:currentColor;border-radius:2px;transform-origin:bottom;height:6px;transition:height .22s,opacity .22s}
    @keyframes eqWave{0%{transform:scaleY(.35)}25%{transform:scaleY(1)}50%{transform:scaleY(.55)}75%{transform:scaleY(.9)}100%{transform:scaleY(.35)}}
    #mini-play-pause-btn.mini-playing .mini-eq .bar{animation:eqWave 900ms ease-in-out infinite}
    #mini-play-pause-btn.mini-playing .mini-eq .b1{animation-delay:0ms}
    #mini-play-pause-btn.mini-playing .mini-eq .b2{animation-delay:120ms}
    #mini-play-pause-btn.mini-playing .mini-eq .b3{animation-delay:240ms}
    #mini-play-pause-btn.mini-paused .mini-eq .bar{animation:none;height:6px;opacity:1}
    .mini-pause-anim{position:absolute;display:flex;gap:6px;align-items:center;justify-content:center;pointer-events:none;width:16px;height:22px;opacity:0;transform:scale(.8);transition:opacity .22s,transform .22s}
    .mini-pause-anim span{display:block;width:4px;height:16px;border-radius:2px;background:currentColor}
    #mini-play-pause-btn.mini-paused .mini-pause-anim{opacity:1;transform:scale(1)}
    #mini-play-pause-btn.mini-playing .mini-pause-anim{opacity:0;transform:scale(.85)}

    /* auth overlay */
    #auth-overlay{position:fixed;inset:0;z-index:1000;display:flex;align-items:center;justify-content:center;transition:opacity .32s,transform .32s;opacity:1;pointer-events:auto}
    #auth-overlay.hidden{opacity:0;pointer-events:none}
    #auth-bg-image{position:absolute;inset:0;background-position:center;background-size:cover;filter:blur(8px) saturate(1.05) contrast(.9);transform:scale(1.06);z-index:1000;transition:filter .4s,opacity .4s;opacity:1}
    #auth-bg-dim{position:absolute;inset:0;background:linear-gradient(180deg,rgba(3,7,18,.6),rgba(3,7,18,.75));z-index:1001}
    #auth-card{position:relative;z-index:1002;width:760px;max-width:94%;display:grid;grid-template-columns:320px 1fr;gap:20px;border-radius:14px;padding:22px;box-shadow:0 20px 60px rgba(2,6,23,.7);overflow:hidden;border:1px solid rgba(255,255,255,.04)}
    #auth-art .cover{width:220px;height:220px;border-radius:12px;background-size:cover;background-position:center;box-shadow:0 12px 30px rgba(0,0,0,.6);border:1px solid rgba(255,255,255,.04)}
    .auth-input{width:100%;padding:12px 14px;border-radius:10px;background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.04);color:#fff;margin-top:10px;outline:none}
    .icon-button{position:absolute;right:8px;top:50%;transform:translateY(-50%);border:0;background:rgba(255,255,255,.02);color:#cbd5e1;padding:6px;border-radius:8px;display:inline-flex;align-items:center;justify-content:center;cursor:pointer}
    .input-with-icon{position:relative;margin-top:10px}
    .input-icon-left{position:absolute;left:12px;top:50%;transform:translateY(-50%);width:18px;height:18px;color:#9ca3af;opacity:.95;pointer-events:none}
    .auth-input.with-left-icon{padding-left:44px;padding-right:44px}

    .bg-gray-700{background-color:rgba(42,53,78,.6);backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);border:1px solid rgba(255,255,255,.1);border-radius:8px}
    .bg-gray-800{background-color:rgba(17,29,50,.6);backdrop-filter:blur(12px) saturate(180%);-webkit-backdrop-filter:blur(12px) saturate(180%);border:1px solid rgba(255,255,255,.1);border-radius:12px}

    /* responsive */
    @media (max-width:720px){
      #auth-card{grid-template-columns:1fr;padding:16px;gap:12px}
      #auth-art .cover{width:160px;height:160px}
      .eq-bars{display:none}
    }
  </style>
</head>
<body>

  <!-- AUTH OVERLAY -->
  <div id="auth-overlay" class="hidden" aria-hidden="true" role="dialog" aria-labelledby="auth-title" aria-modal="true">
    <div id="auth-bg-image" aria-hidden="true" style="background-image:url('https://iili.io/KiUJydX.png');"></div>
    <div id="auth-bg-dim" aria-hidden="true"></div>

    <div id="auth-card">
      <div id="auth-art">
        <div class="cover" id="auth-cover" style="background-image: url('https://iili.io/KiUJydX.png');"></div>
        <div class="badge">üéµ SYSACCESSVIP</div>
        <div style="font-size:12px;color:#9ca3af;text-align:center;max-width:220px">Accede a tu cuenta para sincronizar playlists, favoritos y continuar reproduciendo donde dejaste.</div>
      </div>

      <div>
        <form id="auth-form" autocomplete="on" style="margin-top:12px">
          <label class="sr-only">Correo</label>
          <div class="input-with-icon">
            <svg class="input-icon-left" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M12 12c2.761 0 5-2.239 5-5s-2.239-5-5-5-5 2.239-5 5 2.239 5 5 5z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M3 21c0-3.866 3.582-7 9-7s9 3.134 9 7" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>
            <input id="auth-email" class="auth-input with-left-icon" type="email" required placeholder="tu@correo.com" />
          </div>

          <label class="sr-only">Contrase√±a</label>
          <div class="input-with-icon" style="position:relative;">
            <svg class="input-icon-left" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><rect x="3" y="11" width="18" height="10" rx="2" stroke="currentColor" stroke-width="1.5"></rect><path d="M7 11V8a5 5 0 0110 0v3" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>
            <input id="auth-password" class="auth-input with-left-icon" type="password" required placeholder="Contrase√±a" />
            <button id="toggle-password-visibility" type="button" class="icon-button" title="Mostrar contrase√±a" aria-pressed="false" aria-label="Mostrar contrase√±a">
              <svg id="eye-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M2.458 12C3.732 7.943 7.523 5 12 5s8.268 2.943 9.542 7c-1.274 4.057-5.065 7-9.542 7S3.732 16.057 2.458 12z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="1.5"></circle></svg>
            </button>
          </div>

          <div id="auth-error"></div>

          <div style="display:flex;align-items:center;justify-content:space-between;margin-top:12px;gap:12px">
            <div style="font-size:12px;color:#9ca3af">Intentos: <strong id="auth-attempts">3</strong></div>
            <div style="display:flex;align-items:center;gap:8px">
              <button id="auth-submit" type="submit">Entrar
                <span class="eq-bars" aria-hidden="true"><span></span><span></span><span></span></span>
              </button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
  <!-- /AUTH OVERLAY -->

  <!-- Sidebar -->
  <div id="sidebar-backdrop" class="fixed inset-0 bg-black/50 z-40 hidden"></div>
  <div id="sidebar" class="fixed top-0 left-0 w-64 h-full bg-gray-800 z-50 shadow-lg transform -translate-x-full">
    <div class="p-4 flex justify-between items-center">
      <h2 class="text-xl font-bold">Men√∫</h2>
      <button id="close-sidebar-btn" class="p-2 rounded-full hover:bg-gray-700" aria-label="Cerrar men√∫">‚úï</button>
    </div>
    <nav class="mt-4">
      <a href="#" class="nav-link flex items-center p-4 text-lg hover:bg-gray-700" data-page="home">Inicio</a>
      <a href="#" class="nav-link flex items-center p-4 text-lg hover:bg-gray-700" data-page="favorites">Favoritos</a>
      <a href="#" class="nav-link flex items-center p-4 text-lg hover:bg-gray-700" data-page="recents">Recientes</a>
      <a href="#" class="nav-link flex items-center p-4 text-lg hover:bg-gray-700" data-page="library">Biblioteca</a>
      <a href="#" id="logout-link" class="flex items-center p-4 text-lg hover:bg-gray-700">Cerrar sesi√≥n</a>
    </nav>
  </div>

  <!-- Main content -->
  <div id="main-content" class="flex-1 flex flex-col overflow-hidden relative" style="min-height:100vh;padding-bottom:88px">
    <header>
      <button id="open-sidebar-btn" class="p-2 rounded-full hover:bg-gray-700" aria-label="Abrir men√∫">‚ò∞</button>
      <div style="flex:1">
        <div style="position:relative">
          <input type="search" id="search-input" placeholder="Buscar canciones, artistas o playlists..." />
        </div>
      </div>
      <div style="display:flex;gap:8px">
        <button id="search-button" title="Buscar v√≠deos">üîç</button>
        <button id="search-playlists-button" title="Buscar playlists">üìö</button>
      </div>
    </header>

    <main id="page-container" class="flex-1 overflow-y-auto p-16">
      <div id="page-home" class="page active">
        <h1 id="home-title" class="text-3xl font-bold mb-6">Inicio</h1>
        <div id="results-container" class="mb-6"></div>

        <section id="home-categories-section" class="mb-6">
          <h2>Categories</h2>
          <div class="flex space-x-3 overflow-x-auto pb-2">
            <button class="category-btn" data-category="Rock">Rock</button>
            <button class="category-btn" data-category="Pop">Pop</button>
            <button class="category-btn" data-category="Latin">Latino</button>
            <button class="category-btn" data-category="Hip Hop">Hip Hop</button>
            <button class="category-btn" data-category="Electronic">Electr√≥nica</button>
          </div>
        </section>

        <section id="home-playlists-section" class="mb-6">
          <h2>Playlists (YouTube)</h2>
          <div id="playlists-container" class="grid grid-cols-2 md:grid-cols-3 gap-3"></div>
        </section>

        <section id="home-popular-section">
          <h2>M√∫sica Popular</h2>
          <div id="popular-music-container"></div>
        </section>
      </div>

      <div id="page-favorites" class="page p-4"><h1>Mis Favoritos</h1><div id="favorites-container"></div></div>
      <div id="page-recents" class="page p-4"><h1>Recientes</h1><div id="recents-container"></div></div>
      <div id="page-library" class="page p-4"><h1>Mi Biblioteca</h1><div id="library-container"></div></div>

      <div id="page-playlist-details" class="page overflow-y-auto relative">
        <button id="playlist-back-btn" class="absolute top-4 left-4 z-30 p-2 rounded-full bg-black/50 hover:bg-black/70">‚Üê</button>
        <div id="playlist-sticky-header"><h2 id="playlist-sticky-title" class="text-xl font-bold truncate">Playlist</h2></div>
        <div id="playlist-header"><div id="playlist-info"><h1 id="playlist-title" class="text-4xl font-extrabold"></h1><p id="playlist-channel" class="text-gray-300 mt-1"></p></div></div>
        <div id="playlist-songs-container" class="p-4 bg-gray-850"></div>
      </div>
    </main>
  </div>

  <!-- Full Player -->
  <div id="full-player" class="fixed inset-0 bg-gray-800 z-50 flex flex-col transform translate-y-full overflow-hidden" style="display:flex;flex-direction:column">
    <div id="player-bg-image" class="absolute inset-0 w-full h-full bg-cover bg-center z-0" style="filter: blur(24px); opacity: 0.3; transform: scale(1.2);"></div>

    <header style="z-index:10;padding:12px;display:flex;align-items:center;justify-content:space-between;">
      <button id="minimize-player-btn" aria-label="Minimizar">_</button>
      <span>Reproduciendo</span>
      <div style="display:flex;gap:8px">
        <button id="fav-btn-full" aria-label="Favorito">‚ô°</button>
        <button id="library-options-btn" aria-label="Opciones">‚ãØ</button>
      </div>
    </header>

    <div id="player-main-view" style="flex:1;display:flex;align-items:center;justify-content:center;padding:16px;position:relative;z-index:10">
      <div class="w-full max-w-md relative">
        <div id="player-video-container" class="w-full bg-black rounded-lg overflow-hidden shadow-lg">
          <div id="yt_visible"></div>
          <button id="fullscreen-btn" class="absolute bottom-2 right-2 p-2 bg-black/50 rounded-full text-white">‚§¢</button>
        </div>
      </div>
    </div>

    <div style="z-index:10;padding:12px;text-align:center;">
      <div class="marquee-container"><h3 id="player-title" class="text-xl font-bold marquee-text">T√≠tulo de la Canci√≥n</h3></div>
      <p id="player-artist" class="text-gray-400">Nombre del Artista</p>
    </div>

    <div style="z-index:10;padding:12px 24px">
      <input type="range" id="player-progress-bar" value="0" step="1" />
      <div style="display:flex;justify-content:space-between;font-size:12px;margin-top:6px">
        <span id="player-current-time">0:00</span>
        <span id="player-total-duration">0:00</span>
      </div>
    </div>

    <div style="z-index:10;padding:12px 24px;display:flex;justify-content:space-around;align-items:center">
      <button id="shuffle-btn" title="Shuffle">üîÄ</button>
      <button id="prev-btn" title="Anterior">‚èÆ</button>
      <button id="play-pause-btn" class="w-16 h-16" title="Play/Pause"><svg id="play-icon" viewBox="0 0 20 20" width="28" height="28"><path d="M9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" fill="currentColor"/></svg><svg id="pause-icon" viewBox="0 0 20 20" width="28" height="28" style="display:none"><path d="M8 7a1 1 0 00-1 1v4a1 1 0 002 0V8a1 1 0 00-1-1zm4 0a1 1 0 00-1 1v4a1 1 0 002 0V8a1 1 0 00-1-1z" fill="currentColor"/></svg></button>
      <button id="next-btn" title="Siguiente">‚è≠</button>
      <button id="loop-btn" title="Loop">üîÅ</button>
    </div>

    <div id="queue-trigger-area" style="z-index:10;padding:8px;text-align:center;touch-action:none">
      <button id="show-queue-panel-btn" class="text-gray-400" disabled>‚ñ≤</button>
    </div>

    <div id="player-queue-panel">
      <div id="player-queue-handle"><svg height="24" width="24">‚ñ≤</svg></div>
      <h3 style="text-align:center;padding:8px">Cola de Reproducci√≥n</h3>
      <div id="player-queue-list" style="flex:1;overflow-y:auto;padding:8px"></div>
    </div>
  </div>

  <!-- Mini Player -->
  <div id="mini-player" class="bg-gray-700" style="display:flex;align-items:center;padding:8px;position:fixed;left:0;right:0;bottom:0;height:64px;z-index:40">
    <div id="maximize-player-btn" style="flex:1;display:flex;align-items:center;gap:12px;cursor:pointer">
      <img id="mini-player-thumb" src="https://placehold.co/40x40/000000/FFFFFF?text=?" alt="thumbnail" style="width:40px;height:40px;border-radius:6px"/>
      <div style="overflow:hidden">
        <div class="marquee-container"><p id="mini-player-title" class="marquee-text-mini">No hay nada sonando</p></div>
        <p id="mini-player-artist" style="font-size:12px;color:#cbd5e1;margin:0">...</p>
      </div>
    </div>

    <button id="mini-play-pause-btn" aria-label="Play / Pause" style="border-radius:999px;padding:6px;background:transparent">
      <div class="mini-eq" aria-hidden="true">
        <span class="bar b1"></span>
        <span class="bar b2"></span>
        <span class="bar b3"></span>
      </div>
      <div class="mini-pause-anim" aria-hidden="true"><span class="p1"></span><span class="p2"></span></div>
      <svg id="mini-play-icon" style="display:none" width="20" height="20"><path d="M9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" fill="currentColor"/></svg>
      <svg id="mini-pause-icon" style="display:none" width="20" height="20"><path d="M8 7a1 1 0 00-1 1v4a1 1 0 002 0V8a1 1 0 00-1-1zm4 0a1 1 0 00-1 1v4a1 1 0 002 0V8a1 1 0 00-1-1z" fill="currentColor"/></svg>
    </button>
  </div>

  <div id="player-iframe-wrapper" class="fixed -z-10 -top-full -left-full"><div id="yt_hidden_holder"></div></div>
  <div id="toast-root"></div>

  <!-- Script (module) -->
  <script type="module" src="script.js"></script>
</body>
</html>
